# Redis Sentinel Configuration for High Availability
# Moshimoshi Review Engine

port 26379
bind 0.0.0.0

# Sentinel working directory
dir /tmp

# Monitor the Redis master
sentinel monitor mymaster redis 6379 2
sentinel auth-pass mymaster ${REDIS_PASSWORD}

# Master considered down after 30 seconds
sentinel down-after-milliseconds mymaster 30000

# Parallel sync limit
sentinel parallel-syncs mymaster 1

# Failover timeout
sentinel failover-timeout mymaster 180000

# Script execution
sentinel deny-scripts-reconfig yes

# Notification scripts (optional)
# sentinel notification-script mymaster /var/redis/notify.sh
# sentinel client-reconfig-script mymaster /var/redis/reconfig.sh

# Logging
logfile ""
loglevel notice

# Sentinel announce settings for Docker/NAT
sentinel announce-ip ${SENTINEL_ANNOUNCE_IP}
sentinel announce-port ${SENTINEL_ANNOUNCE_PORT}